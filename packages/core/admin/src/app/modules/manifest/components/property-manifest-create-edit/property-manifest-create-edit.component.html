<div class="container" style="border: 1px solid blue">
  <!-- Type selection-->
  <div class="columns is-multiline" *ngIf="!typeSelected">
    <div class="column is-3" *ngFor="let propType of propTypesArray">
      <label class="radio">
        <input
          type="radio"
          name="type"
          [value]="propType.value"
          (click)="setType(propType.value)"
        />

        <!-- TODO: Add real icons -->
        {{ propType.label }}
      </label>
    </div>
  </div>

  <form [formGroup]="propertyManifestFormGroup">
    <ng-container *ngIf="typeSelected">
      <!-- Name input-->
      <div class="columns">
        <div class="column is-3">
          ({{ propertyManifestFormGroup.get('type')?.value }}-icon)
        </div>
        <div class="column is-7">
          <input type="text" class="input" formControlName="name" #nameInput />
        </div>
        <div class="column">
          <a (click)="extended = !extended">
            <i
              class="icon"
              [ngClass]="extended ? 'icon-chevron-up' : 'icon-chevron-down'"
            ></i>
          </a>
        </div>
      </div>

      <!-- Conditional options -->
      <div formGroupName="options" style="background-color: aquamarine">
        <!-- Money type options-->
        <div *ngIf="propertyManifestFormGroup.value.type === PropType.Money">
          <label for="currency">Currency</label>
          <select class="input form-control" formControlName="currency">
            <option value=""></option>
            <option *ngFor="let currency of currencies" [value]="currency.id">
              {{ currency.id }} - {{ currency.label }}
            </option>
          </select>
        </div>

        <!-- Choice type options -->
        <div *ngIf="propertyManifestFormGroup.value.type === PropType.Choice">
          <!-- Values -->
          <label for="values">Options</label>
          <button (click)="addOptionValue()">Add Option</button>
          <div formArrayName="values">
            <div *ngFor="let value of optionValues.controls; let i = index">
              <input
                type="text"
                [formControlName]="i"
                placeholder="Option {{ i + 1 }}"
              />
              <button (click)="removeOptionValue(i)">Remove</button>
            </div>
          </div>

          <!-- Sequential -->
          <label for="sequential">List type</label>
          <select
            formControlName="sequential"
            class="input form-control"
            name="sequential"
          >
            <option [ngValue]="false">Flat list</option>
            <option [ngValue]="true">Sequential</option>
          </select>
        </div>

        <!-- Image type options -->
        <div *ngIf="propertyManifestFormGroup.value.type === PropType.Image">
          <label for="sizes"
            >Sizes <a (click)="addImageSize()">Add image size</a></label
          >
          <div formGroupName="sizes">
            <div *ngFor="let sizeName of imageSizes.controls; let i = index">
              <div [formGroupName]="i" class="container">
                <div class="columns">
                  <input
                    class="input form-control"
                    type="text"
                    formControlName="name"
                    placeholder="Image name (ex: thumbnail, large...)"
                  />
                  <input
                    class="input form-control"
                    type="number"
                    step="1"
                    min="1"
                    formControlName="height"
                    placeholder="Height"
                  />
                  <input
                    class="input form-control"
                    type="number"
                    step="1"
                    min="1"
                    formControlName="width"
                    placeholder="Width"
                  />
                  <button (click)="removeImageSize(i)">Remove</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Extended options -->
      <ng-container *ngIf="extended">
        <label class="checkbox">
          <input type="checkbox" formControlName="hidden" name="hidden" />
          Hidden
        </label>

        <label for="helpText">Help text</label>
        <input
          class="input form-control"
          type="text"
          formControlName="helpText"
        />

        <label for="default">Default value</label>
        <input
          class="input form-control"
          type="text"
          formControlName="default"
        />
      </ng-container>

      <!-- Dropdown menu -->
      <div class="dropdown is-active">
        <div class="dropdown-trigger">
          <button
            class="button dropdown-button"
            aria-haspopup="true"
            aria-controls="dropdown-menu"
            (click)="showDropdown = !showDropdown"
          >
            Dropdown button
            <span class="icon is-small">
              <i class="icon icon-chevron-down" aria-hidden="true"></i>
            </span>
          </button>
        </div>
        <div
          class="dropdown-menu"
          id="dropdown-menu"
          role="menu"
          *ngIf="showDropdown"
        >
          <div class="dropdown-content">
            <!-- TODO: Duplicate field -->
            <a class="dropdown-item" (click)="duplicate()">Duplicate field </a>
            <a class="dropdown-item" (click)="remove()"
              ><span class="has-text-danger">Remove field</span>
            </a>
          </div>
        </div>
      </div>
    </ng-container>
  </form>
</div>
