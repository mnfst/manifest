<ng-container *ngIf="!isLogin">
  <app-touch-menu class="is-hidden-desktop"></app-touch-menu>
</ng-container>

<app-flash-message></app-flash-message>

<div class="wrapper">
  <div class="columns">
    <div class="column primary-sidebar menu px-0" *ngIf="!isLogin">
      <app-primary-sidebar></app-primary-sidebar>
    </div>
    <aside class="column aside menu px-0 is-hidden-touch" *ngIf="!isLogin">
      <app-side-menu></app-side-menu>
    </aside>
    <div class="column main">
      <main>
        <router-outlet></router-outlet>
      </main>

      <div class="version-checker" *ngIf="!isLogin">
        <div
          class="version-checker__content is-flex is-justify-content-space-between is-align-items-center is-size-5 is-fullwidth"
        >
          <div>
            Proudly built with
            <a href="https://manifest.build" target="_blank">Manifest</a>.
          </div>
          <ng-container *ngIf="appManifest">
            <div>
              <span>v</span>
              <i>{{ appManifest.manifestVersion }}</i>
              <ng-container
                *ngIf="
                  latestVersion &&
                  newVersionAvailable &&
                  appManifest.environment !== 'contribution'
                "
              >
                - Manifest {{ latestVersion }} is available!

                <ng-container *ngIf="appManifest.environment === 'production'">
                  Please notify your administrator.
                </ng-container>
                <ng-container *ngIf="appManifest.environment === 'development'">
                  <a
                    target="_blank"
                    href="https://github.com/mnfst/manifest/releases"
                    >Please update now.</a
                  >
                </ng-container>
              </ng-container>
            </div>
          </ng-container>
        </div>
      </div>
    </div>
  </div>
</div>
